<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <h1>Modifica Corso</h1>
    <form action="/admin/courses/edit/<%= course._id %>?_method=PUT" method="POST" enctype="multipart/form-data">
        <label>Titolo</label>
        <input type="text" name="title" value="<%= course.title %>" required />
        
        <label>Descrizione</label>
        <textarea name="description" required><%= course.description %></textarea>
        
        <label>Prezzo (€)</label>
        <input type="number" step="0.01" name="price" value="<%= course.price %>" required />
        
        <label>Durata</label>
        <input type="text" name="duration" value="<%= course.duration %>" />
        
        <label>Modalità</label>
        <select name="modality" required>
            <option value="online" <%= course.modality === 'online' ? 'selected' : '' %>>Online</option>
            <option value="in presenza" <%= course.modality === 'in presenza' ? 'selected' : '' %>>In presenza</option>
            <option value="blended" <%= course.modality === 'blended' ? 'selected' : '' %>>Blended</option>
        </select>
        
        <label>Luogo (solo se in presenza)</label>
        <input type="text" name="location" value="<%= course.location %>" />

        <label>Categoria</label>
        <select name="category" required>
            <option value="Formazione generale e specifica lavoratori" <%= course.category === 'Formazione generale e specifica lavoratori' ? 'selected' : '' %>>Formazione generale e specifica lavoratori</option>
            <option value="Antincendio" <%= course.category === 'Antincendio' ? 'selected' : '' %>>Antincendio</option>
            <option value="Primo soccorso" <%= course.category === 'Primo soccorso' ? 'selected' : '' %>>Primo soccorso</option>
            <option value="HACCP e igiene alimentare" <%= course.category === 'HACCP e igiene alimentare' ? 'selected' : '' %>>HACCP e igiene alimentare</option>
            <option value="Attrezzature da lavoro (Accordo Stato-Regioni 2012)" <%= course.category === 'Attrezzature da lavoro (Accordo Stato-Regioni 2012)' ? 'selected' : '' %>>Attrezzature da lavoro (Accordo Stato-Regioni 2012)</option>
            <option value="Lavori in quota e DPI" <%= course.category === 'Lavori in quota e DPI' ? 'selected' : '' %>>Lavori in quota e DPI</option>
            <option value="Aggiornamento obbligatorio" <%= course.category === 'Aggiornamento obbligatorio' ? 'selected' : '' %>>Aggiornamento obbligatorio</option>
        </select>
        
        <label>Sottocategorie (separate da virgola)</label>
        <input type="text" name="subCategory" value="<%= course.subCategory.join(', ') %>" />
        
        <% if (course.image) { %>
            <p>Immagine attuale:</p>
            <img src="<%= course.image %>" alt="immagine corso" width="200" />
        <% } %>
        
        <label>Nuova immagine (opzionale)</label>
        <input type="file" name="image" accept="image/*" />
        
        <button type="submit">Aggiorna</button>
    </form>
</body>
</html>